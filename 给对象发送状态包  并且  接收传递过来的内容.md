
//发送状态包

```squirrel title:转换对象类
local activeObj = sq_GetCNRDObjectToActiveObject(object);//转为活动类
local sqrChr = sq_GetCNRDObjectToSQRCharacter(parentObj);//转为角色类
local colObj = sq_GetCNRDObjectToCollisionObject(damager);//转为控制类
```


```squirrel title:这里是发送状态时-给状态定义的类型
STATE_PRIORITY_AUTO <- 0 //根据时间和条件自动完成的一切(攻击结束，发射->战场等等) 特效一般用这个
STATE_PRIORITY_USER <- 1 //根据用户的commund发布的内容(技能，攻击等)  一般是使用技能的时候
STATE_PRIORITY_HALF_FORCE < 2 / 3 /想要离开，但都比强制要低。(翻过来等)
STATE_PRIORITY_FORCE < 3 //被迫去做的事情。(坠落，伤害，死亡，拦截等)  一般给敌人发送控制状态时
STATE_PRIORITY_IGNORE_FORCE < 4 //强制变更无视的东西。(用手术刀抓住对方等)   一般是抓取敌人的时候
```


```squirrel title:下面是发送状态时-还传递数值过去
obj.sq_IntVectClear();
obj.sq_IntVectPush(SUB_STATE_BLUEDRAGONWILL_0);
obj.sq_AddSetStatePacket(STATE_BLUEDRAGONWILL, STATE_PRIORITY_USER, true);//角色类对象 发送状态
//不传值的话就这样写  更改一下最后的参数为false就行了
obj.sq_AddSetStatePacket(STATE_BLUEDRAGONWILL, STATE_PRIORITY_USER, false);//角色类对象 发送状态

//如果是复仇者 那么就要这么写  就区分一下大小写的a
obj.sq_addSetStatePacket(STATE_BLUEDRAGONWILL, STATE_PRIORITY_USER, false);//角色类对象 发送状态

//如果是特效nut中写的话就用这个
local pIntVec = sq_GetGlobalIntVector();//得到包
sq_IntVectorClear(pIntVec);//清除
sq_IntVectorPush(pIntVec, x);//加入
obj.addSetStatePacket(PASSIVEOBJ_SUB_STATE_0, pIntVec, STATE_PRIORITY_AUTO, false, "");//控制类对象  发送状态

obj.addSetStatePacket(PASSIVEOBJ_SUB_STATE_0, sq_GetGlobalIntVector(), STATE_PRIORITY_AUTO, false, "");//控制类对象  发送状态


//当然也可以 用下面的方法
obj.sendStateOnlyPacket(PASSIVEOBJ_SUB_STATE_0);//控制类对象 发送状态
obj.sendStatePacket(PASSIVEOBJ_SUB_STATE_0, 1);//控制类对象 发送状态并且传递过去了一个值

//最后可以刷新一下发送的状态包
obj.flushSetStatePacket();//刷新发送的状态包
```



```squirrel title:下面的是不常用的-区分活动类对象--或者--控制类对象
    sq_IntVectorClear(sq_GetGlobalIntVector());
    sq_IntVectorPush(sq_GetGlobalIntVector(),1);
    sq_AddSetStatePacketActiveObject(sourceObj,8, sq_GetGlobalIntVector(), STATE_PRIORITY_USER);//活动类对象发送状态

    sq_IntVectorClear(sq_GetGlobalIntVector());
    sq_IntVectorPush(sq_GetGlobalIntVector(),2);
    sq_AddSetStatePacketCollisionObject(sourceObj, 8, sq_GetGlobalIntVector(), STATE_PRIORITY_USER, true);//控制类对象发送状态

//这里就开始接收 传递过来的数值

//这个是特效或者技能效果包会用到这个
local x = sq_GetVectorData(datas, 0);

//这个是角色发送的状态 接收的数据
local SubState = obj.sq_GetVectorData(datas, 0);//得到傳過來的第0個值
```

```squirrel title:发送第13状态的传值介绍

# STATE_THROW
[0]   Throw State (0:모으기, 1:던지기, 2:개인시전)
* Throw State 0 *
[1]   던지는 타입 (ENUM_THROW_TYPE)
[2]   던지는 대상의 인덱스 (스킬 인덱스 or 아이템 인덱스)
[3]   모으는 시간
[4]   발사 시간
[5]   던지기 애니메이션 타입 (0 or 1)
[6]   모으기 속도 타입
[7]   발사 속도 타입
[8]   모으기 속도 (안넣으면 SPEED_VALUE_DEFAULT)
[9]   발사 속도 (안넣으면 SPEED_VALUE_DEFAULT)
[10]	개인시전 범위 (안넣거나 -1이면 개인시전 안함)
* Throw State 1 *
// Throw State 2에서 넘어왔을 경우에만
[1]	개인 시전시 대상 Object Id
* Throw State 2 *
obj.sq_IntVectClear();				
obj.sq_IntVectPush(0);		// throwState
obj.sq_IntVectPush(0);		// throwType
obj.sq_IntVectPush(SKILL_ELEMENTAL_CHANGE);	// throwIndex
obj.sq_IntVectPush(500);	// throwChargeTime
obj.sq_IntVectPush(500);	// throwShootTime
obj.sq_IntVectPush(0);		// throwAnimationIndex
obj.sq_IntVectPush(4);		// chargeSpeedType
obj.sq_IntVectPush(4);		// throwShootSpeedType
obj.sq_IntVectPush(1000);	// chargeSpeedValue
obj.sq_IntVectPush(1000);	// throwShootSpeedValue
obj.sq_IntVectPush(-1);		// personalCastRange
obj.sq_AddSetStatePacket(STATE_THROW, STATE_PRIORITY_USER, true);	
```