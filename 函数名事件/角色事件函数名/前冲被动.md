```squirrel title:
function procDash_ATMage(obj) {
	if (!obj) return;
	local ani = sq_GetCurrentAnimation(obj);
	if (!ani) return;
	local isFlag = obj.sq_IsKeyFrameFlag(ani, 1);
	local result = CNSquirrelAppendage.sq_IsAppendAppendage(obj, "Character/ATMage/IceRoad/ap_ATMage_IceRoad.nut");
	if (result == true)
	{
		if (isFlag) {
			obj.sq_PlaySound("R_ICE_WALK");
		}
		obj.sq_ClearKeyFrameFlag(ani);
	}
	else {
		if (isFlag) {
			local stage = sq_GetGlobaludpModuleStage();
			if (!stage) return;
			local dungeon = sq_GetDungeonByStage(stage);
			if (!dungeon) return;

			local dungeonIndex = sq_GetDuegonIndex(dungeon);
			local mapIndex = sq_GetMapIndex(stage);
			if (dungeonIndex == 40 || mapIndex == 50019) {
				obj.sq_PlaySound("R_RUN_SNOW");
			}
			else {
				local weight = sq_GetObjectWeight(obj);
				if (sq_GetShadowTypeByAnimation() != 0) obj.sq_PlaySound("R_RUN_FLOOR");
				else if (weight < LIGHT_OBJECT_MAX_WEIGHT) obj.sq_PlaySound("RUN_STONE");
				else if (weight < MIDDLE_OBJECT_MAX_WEIGHT) obj.sq_PlaySound("RUN_SOIL");
				else obj.sq_PlaySound("RUN_GRASS");
			}
		}
		obj.sq_ClearKeyFrameFlag(ani);
	}
}
```