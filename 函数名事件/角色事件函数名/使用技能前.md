```squirrel title:
function useSkill_before_ATMage(obj, skillIndex, consumeMp, consumeItem, oldSkillMpRate) {
	local bChangedMp = false;
	print(" consumpMp:" + consumeMp + " oldSkillMpRate:" + oldSkillMpRate);
	local appendage = obj.GetSquirrelAppendage("Character/ATMage/ManaBurst/ap_ATMage_ManaBurst.nut");
	if (appendage) {
		local isvalid = appendage.isValid();
		if (isvalid) {
			local skillLevel = obj.sq_GetSkillLevel(SKILL_MANABURST);
			local mpComsumeRate = sq_GetLevelData(obj, SKILL_MANABURST, SKL_LVL_COLUMN_IDX_0, skillLevel);
			local newMpRate = oldSkillMpRate.tofloat() * (100 + mpComsumeRate.tofloat()) / 100;
			print(" newMpRate:" + newMpRate);
			obj.setSkillMpRate(skillIndex, newMpRate.tofloat());
			bChangedMp = true;
		}
	}
	if (obj.sq_GetSkillLevel(SKILL_EXPRESSION) > 0) {
		local skillLevel = obj.sq_GetSkillLevel(SKILL_EXPRESSION);
		local skillMpRate = obj.getSkillMpRate(skillIndex);
		local mpComsumeRate = sq_GetLevelData(obj, SKILL_EXPRESSION, 0, skillLevel);
		local newMpRate = skillMpRate.tofloat() * (100 - mpComsumeRate.tofloat()) / 100;

		obj.setSkillMpRate(skillIndex, newMpRate.tofloat());
	}
	print(" now consumpMp:" + obj.getSkillMpRate(skillIndex));
	return true;
}
```