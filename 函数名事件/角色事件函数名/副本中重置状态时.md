#城镇中也会运行 #就相当于进入副本回到城镇都会运行
```squirrel title:
function resetDungeonStart_ATMage(obj, moduleType, resetReason, isDeadTower, isResetSkillUserCount) {

	if (!obj) return -1;
	local isReset = true;
	if (sq_GetCurrentModuleType() == MODULE_TYPE_WARROOM || sq_GetCurrentModuleType() == MODULE_TYPE_DEAD_TOWER) {

		if (resetReason != REASON_DEATH) {
			isReset = false;
		}
	}
	if (isReset) {
		local appendage = obj.GetSquirrelAppendage("Character/ATMage/IceRoad/ap_ATMage_IceRoad.nut");
		if (appendage) {
			local skill = sq_GetSkill(obj, SKILL_ICEROAD);
			local isvalid = appendage.isValid();
			if (skill) {
				print(" isSeal:" + skill.isSealActiveFunction());
				if (!skill.isSealActiveFunction()) {
					skill.setSealActiveFunction(true);
				}
			}
			if (isvalid) {
				appendage.setValid(false);
			}
		}
		obj.sq_RemoveSkillLoad(SKILL_HOLONG_LIGHT);
	}
	return 1;
}
```